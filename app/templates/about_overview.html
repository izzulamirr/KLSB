{% extends 'base.html' %}
{% block title %}About Us — Overview | KLSB{% endblock %}
{% block content %}
<section class="relative overflow-hidden py-24 bg-white">
	<div class="max-w-6xl mx-auto px-6">
    <header class="max-w-4xl mx-auto text-center">
    <img src="{{ url_for('static', filename='img/logo/KLSB_full_bottom.svg') }}" alt="Kemuncak Lanai Logo" class="mx-auto h-24 sm:h-40 mb-2" style="max-width:640px; width:100%; height:auto; object-fit:contain;" />
    <p class="mt-6 text-lg text-slate-600 leading-relaxed">We provide integrated manpower, engineering, digital and inspection capability under a coordinated delivery model that reduces interface risk and accelerates predictable outcomes for industrial and energy stakeholders.</p>
</header>
		<div class="mt-14 grid gap-6 md:grid-cols-1">
  <div class="relative overflow-hidden rounded-2xl bg-white/80 backdrop-blur-sm p-6 shadow-sm hover:shadow-md transition-shadow col-span-3">
        <div class="text-xl font-semibold tracking-wide text-#030C69-600/80">Foreword</div>
        <div class="mt-4 flex justify-center">
          <button id="forewordBtn" aria-label="Open foreword" class="focus:outline-none">
            <img id="forewordThumb" src="{{ url_for('static', filename='img/Foreword.png') }}" alt="Foreword" class="w-full md:w-1/2 mx-auto h-auto rounded-md shadow-sm transform transition-transform duration-200 hover:scale-105 cursor-pointer" />
          </button>
        </div>
        <p class="mt-3 text-sm text-slate-600 text-center">A short message from the leadership.</p>
      </div>
		</div>


		<!-- Company Evolution Narrative 
	<section class="mt-16 max-w-4xl mx-auto text-center">
    <h2 class="text-xl font-semibold tracking-tight text-slate-900 flex items-center gap-2 justify-center">
        <span class="h-5 w-1.5 rounded-full bg-teal-500"></span>
        <span>Company Evolution</span>
    </h2>
<p class="mt-4 text-slate-600 leading-relaxed text-l">
        Kemuncak Lanai Sdn Bhd (KLSB), established in 2011, is a professional service provider with core expertise in <strong>Technical Manpower Supply</strong> and <strong>3D Modelling & Design Consultancy</strong>. Over the years, we have progressively broadened our capabilities—now spanning <strong>Advanced Work Packaging (AWP)</strong>, <strong>Specialized Inspection Services</strong> and <strong>Cybersecurity Consultancy</strong>. This evolution reflects disciplined capability building to deliver reliable, value‑driven outcomes.
    </p>
	</section> -->

	<section class="py-24 bg-white">
  <div class="max-w-6xl mx-auto px-6">
    <h1 class="text-4xl font-bold tracking-tight">Our Journey</h1>
    <p class="mt-6 max-w-3xl text-slate-600 leading-relaxed">More than a decade of disciplined growth: from a focused engineering & manpower nucleus to an integrated delivery partner embracing digital, AWP and upcoming cybersecurity & inspection capabilities.</p>
    <div class="mt-14 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      <!-- 2011 -->
      <div class="group relative bg-white border border-slate-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex items-center gap-2 text-xs font-semibold tracking-wide uppercase text-teal-700">
          <span class="px-2 py-0.5 rounded-full bg-teal-600/10 text-teal-700">2011</span>
          <span class="text-slate-400">Foundation</span>
        </div>
        <h3 class="mt-4 font-semibold text-slate-900">Launch & Core Capability</h3>
        <p class="mt-2 text-sm text-slate-600 leading-relaxed">Focused start in manpower supply & 3D modelling / engineering design establishing quality baseline.</p>
        <ul class="mt-4 space-y-1.5 text-xs text-slate-600">
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-500 mt-1"></span>Pilot multi‑discipline drafting cells</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-500 mt-1"></span>QA checklist discipline</li>
        </ul>
      </div>
      <!-- 2012–2018 -->
      <div class="group relative bg-white border border-slate-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex items-center gap-2 text-xs font-semibold tracking-wide uppercase text-teal-700">
          <span class="px-2 py-0.5 rounded-full bg-teal-500/10 text-teal-700">2012–18</span>
          <span class="text-slate-400">Scaling</span>
        </div>
        <h3 class="mt-4 font-semibold text-slate-900">Structured Growth</h3>
        <p class="mt-2 text-sm text-slate-600 leading-relaxed">Team expansion with discipline leads, onboarding structure and process refinement.</p>
        <ul class="mt-4 space-y-1.5 text-xs text-slate-600">
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-400 mt-1"></span>Model QA loops</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-400 mt-1"></span>Knowledge share cadence</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-400 mt-1"></span>Defined discipline ownership</li>
        </ul>
      </div>
      <!-- 2019–2022 -->
      <div class="group relative bg-white border border-slate-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex items-center gap-2 text-xs font-semibold tracking-wide uppercase text-teal-700">
          <span class="px-2 py-0.5 rounded-full bg-teal-400/10 text-teal-700">2019–22</span>
          <span class="text-slate-400">Method</span>
        </div>
        <h3 class="mt-4 font-semibold text-slate-900">AWP Integration</h3>
        <p class="mt-2 text-sm text-slate-600 leading-relaxed">Advanced Work Packaging drives readiness discipline & constraint visibility.</p>
        <ul class="mt-4 space-y-1.5 text-xs text-slate-600">
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-300 mt-1"></span>Work pack structuring</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-300 mt-1"></span>Constraint tracking</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-300 mt-1"></span>Readiness gates</li>
        </ul>
      </div>
      <!-- 2023 -->
      <div class="group relative bg-white border border-slate-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex items-center gap-2 text-xs font-semibold tracking-wide uppercase text-teal-700">
          <span class="px-2 py-0.5 rounded-full bg-teal-300/10 text-teal-700">2023</span>
          <span class="text-slate-400">Expansion</span>
        </div>
        <h3 class="mt-4 font-semibold text-slate-900">Strategic Broadening</h3>
        <p class="mt-2 text-sm text-slate-600 leading-relaxed">Preparation for cybersecurity consultancy & inspection service launch.</p>
        <ul class="mt-4 space-y-1.5 text-xs text-slate-600">
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-200 mt-1"></span>Service playbooks</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-200 mt-1"></span>Security posture frameworks</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-teal-200 mt-1"></span>Inspection workflows</li>
        </ul>
      </div>
      <!-- 2024+ -->
      <div class="group relative bg-white border border-slate-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow">
        <div class="flex items-center gap-2 text-xs font-semibold tracking-wide uppercase text-teal-700">
          <span class="px-2 py-0.5 rounded-full bg-slate-400/10 text-slate-700">2024+</span>
          <span class="text-slate-400">Trajectory</span>
        </div>
        <h3 class="mt-4 font-semibold text-slate-900">Forward Focus</h3>
        <p class="mt-2 text-sm text-slate-600 leading-relaxed">Integrating data insight, automation pilots & secure-by-design operations.</p>
        <ul class="mt-4 space-y-1.5 text-xs text-slate-600">
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-slate-400 mt-1"></span>Analytics layer</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-slate-400 mt-1"></span>Automation pilots</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-slate-400 mt-1"></span>Talent pipeline</li>
          <li class="flex gap-2"><span class="h-1.5 w-1.5 rounded-full bg-slate-400 mt-1"></span>Resilience KPIs</li>
        </ul>
      </div>
      <!-- Narrative Card (optional) -->
      
    </div>
  </div>
</section>

<!-- Foreword image modal -->
<div id="imgModal" class="fixed inset-0 z-50 hidden bg-black/70">
  <button id="closeModal" class="fixed top-4 right-4 text-white text-3xl leading-none px-3 py-1 z-60">&times;</button>
  <div id="modalDialog" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-auto px-2 flex flex-col items-center justify-center">
    <img id="modalImg" src="{{ url_for('static', filename='img/Foreword.png') }}" alt="Foreword" class="block max-h-[90vh] w-[calc(100vw-2rem)] h-auto object-contain transform transition-transform duration-150" style="cursor: grab; margin:0;" />
    <div class="flex items-center justify-center gap-2 mt-4">
      <button id="zoomOut" class="bg-white text-slate-700 px-3 py-1 rounded">-</button>
      <button id="resetZoom" class="bg-white text-slate-700 px-3 py-1 rounded">Reset</button>
      <button id="zoomIn" class="bg-white text-slate-700 px-3 py-1 rounded">+</button>
    </div>
  </div>
</div>

<script>
  (function(){
    const openBtn = document.getElementById('forewordBtn');
    const modal = document.getElementById('imgModal');
    const modalImg = document.getElementById('modalImg');
    const closeBtn = document.getElementById('closeModal');
    const zoomIn = document.getElementById('zoomIn');
    const zoomOut = document.getElementById('zoomOut');
    const resetZoom = document.getElementById('resetZoom');

    let scale = 1;
    let tx = 0, ty = 0;
    let dragging = false, dragStartX = 0, dragStartY = 0, startTx = 0, startTy = 0;

    modalImg.style.transformOrigin = 'center center';
    modalImg.style.transition = 'transform 160ms ease';

    function clampPan(){
      const baseW = modalImg.offsetWidth || modalImg.naturalWidth || 1;
      const baseH = modalImg.offsetHeight || modalImg.naturalHeight || 1;
      const maxPanX = Math.max((baseW * (scale - 1)) / 2, 0) + 10;
      const maxPanY = Math.max((baseH * (scale - 1)) / 2, 0) + 10;
      tx = Math.max(-maxPanX, Math.min(maxPanX, tx));
      ty = Math.max(-maxPanY, Math.min(maxPanY, ty));
    }

    function applyTransform(withTransition = true){
      if(withTransition) modalImg.style.transition = 'transform 160ms ease';
      modalImg.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;
    }

    function lockScroll(){ document.documentElement.style.overflow = 'hidden'; document.body.style.overflow = 'hidden'; }
    function unlockScroll(){ document.documentElement.style.overflow = ''; document.body.style.overflow = ''; }

    function openModal(){
      scale = 1; tx = 0; ty = 0; applyTransform();
      // ensure the overlay is visible and uses flex layout
      try{
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
        modal.style.zIndex = '9999';
        modal.setAttribute('aria-hidden', 'false');
        // make sure image is visible
        modalImg.style.visibility = 'visible';
        modalImg.style.opacity = '1';
      }catch(e){}
      lockScroll();
      closeBtn.focus();
    }

    function closeModal(){
      try{
        modal.classList.add('hidden');
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
      }catch(e){}
      unlockScroll();
      scale = 1; tx = 0; ty = 0; applyTransform(false);
      modalImg.style.transition = 'transform 160ms ease';
      // hide image visibility to avoid flicker under overlays
      modalImg.style.visibility = '';
      openBtn.focus();
    }

    openBtn.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

    zoomIn && zoomIn.addEventListener('click', () => { scale = Math.min(scale + 0.25, 5); clampPan(); applyTransform(); });
    zoomOut && zoomOut.addEventListener('click', () => { scale = Math.max(scale - 0.25, 0.25); if(scale === 1){ tx = 0; ty = 0; } clampPan(); applyTransform(); });
    resetZoom && resetZoom.addEventListener('click', () => { scale = 1; tx = 0; ty = 0; applyTransform(); });

    // Wheel: when zoomed (scale>1) use wheel to pan (vertical by default, Shift+wheel for horizontal).
    // Hold Ctrl/Alt to perform pointer-based zoom instead.
    modalImg.addEventListener('wheel', (e) => {
      // only intercept when modal is open
      if (modal.classList.contains('hidden')) return;
      e.preventDefault();

      // If user holds Ctrl/Alt => treat as zoom toward pointer
      if (e.ctrlKey || e.altKey) {
        const rect = modalImg.getBoundingClientRect();
        const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2;
        const px = e.clientX - cx; const py = e.clientY - cy;
        const oldScale = scale;
        scale = e.deltaY < 0 ? Math.min(scale + 0.12, 5) : Math.max(scale - 0.12, 0.25);
        const factor = (scale/oldScale) - 1;
        tx = tx - px * factor; ty = ty - py * factor;
        clampPan(); applyTransform();
        return;
      }

      // If currently zoomed in, use wheel to pan
      if (scale > 1) {
        const panAmount = e.deltaY; // positive on scroll down
        if (e.shiftKey) {
          // horizontal pan when shift is held
          tx -= panAmount;
        } else {
          // vertical pan
          ty -= panAmount;
        }
        clampPan(); applyTransform(false);
        return;
      }

      // Default: zoom from center when not zoomed yet
      const rect = modalImg.getBoundingClientRect();
      const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2;
      let px = 0, py = 0; // center
      const oldScale = scale;
      scale = e.deltaY < 0 ? Math.min(scale + 0.12, 5) : Math.max(scale - 0.12, 0.25);
      const factor = (scale/oldScale) - 1;
      tx = tx - px * factor; ty = ty - py * factor;
      clampPan(); applyTransform();
    }, { passive: false });

    // Drag-to-pan
    modalImg.addEventListener('mousedown', (e) => {
      if (scale <= 1) return;
      dragging = true; modalImg.style.cursor = 'grabbing'; modalImg.style.transition = 'none';
      dragStartX = e.clientX; dragStartY = e.clientY; startTx = tx; startTy = ty; e.preventDefault();
    });

    window.addEventListener('mousemove', (e) => {
      if (!dragging) return;
      tx = startTx + (e.clientX - dragStartX);
      ty = startTy + (e.clientY - dragStartY);
      clampPan(); applyTransform(false);
    });

    window.addEventListener('mouseup', () => { if (dragging) { dragging = false; modalImg.style.cursor = 'grab'; modalImg.style.transition = 'transform 160ms ease'; } });

    // Basic touch: pinch-to-zoom and single-finger pan when zoomed
    let touchStartDist = 0, touchMid = null, touchStartScale = 1, touchStartTx = 0, touchStartTy = 0;
    modalImg.addEventListener('touchstart', (e) => {
      if (e.touches.length === 2) {
        e.preventDefault();
        const t0 = e.touches[0], t1 = e.touches[1];
        touchStartDist = Math.hypot(t1.clientX - t0.clientX, t1.clientY - t0.clientY);
        touchMid = { x: (t0.clientX + t1.clientX)/2, y: (t0.clientY + t1.clientY)/2 };
        touchStartScale = scale; touchStartTx = tx; touchStartTy = ty;
      } else if (e.touches.length === 1 && scale > 1) {
        dragging = true; dragStartX = e.touches[0].clientX; dragStartY = e.touches[0].clientY; startTx = tx; startTy = ty;
      }
    }, { passive: false });

    modalImg.addEventListener('touchmove', (e) => {
      if (e.touches.length === 2) {
        e.preventDefault();
        const t0 = e.touches[0], t1 = e.touches[1];
        const dist = Math.hypot(t1.clientX - t0.clientX, t1.clientY - t0.clientY);
        const oldScale = scale;
        scale = Math.max(0.25, Math.min(5, touchStartScale * (dist / touchStartDist)));
        const factor = (scale/oldScale) - 1;
        const rect = modalImg.getBoundingClientRect();
        const cx = rect.left + rect.width/2; const cy = rect.top + rect.height/2;
        const px = touchMid.x - cx; const py = touchMid.y - cy;
        tx = tx - px * factor; ty = ty - py * factor;
        clampPan(); applyTransform();
      } else if (e.touches.length === 1 && dragging) {
        e.preventDefault(); tx = startTx + (e.touches[0].clientX - dragStartX); ty = startTy + (e.touches[0].clientY - dragStartY); clampPan(); applyTransform(false);
      }
    }, { passive: false });

    modalImg.addEventListener('touchend', () => { dragging = false; modalImg.style.transition = 'transform 160ms ease'; });

  })();
</script>

		<!-- Offices -->
		<section class="mt-24">
<h2 class="text-xl font-semibold tracking-tight text-slate-900 flex items-center gap-2 justify-center"><span class="h-5 w-1.5 rounded-full bg-teal-500"></span><span>Our Offices</span></h2>
				<div class="max-w-6xl mx-auto px-6">
    <div class="mt-8 flex justify-center">
      <img src="{{ url_for('static', filename='img/map.jpg') }}" alt="Major client" class="w-full max-w-4xl mx-auto rounded-lg shadow-lg object-contain">
    </div>
  </div>			
				<div class="mt-10 grid gap-6 md:grid-cols-3">
				<div class="group relative rounded-2xl border border-slate-200 bg-white/70 backdrop-blur p-5 shadow-sm hover:shadow-md transition-shadow">
					<h3 class="font-medium text-slate-800">Main Office</h3>
					<p class="mt-3 text-xs leading-relaxed text-slate-600">39-5 to 39-8, Binjai 8 Premium SOHO,<br>No. 2 Lorong Binjai,<br>50450, Kuala Lumpur</p>
				</div>
				<div class="group relative rounded-2xl border border-slate-200 bg-white/70 backdrop-blur p-5 shadow-sm hover:shadow-md transition-shadow">
					<h3 class="font-medium text-slate-800">Branch Office (Kuching)</h3>
					<p class="mt-3 text-xs leading-relaxed text-slate-600">1st Floor, Lot 177, Section 12,<br>Jalan Haji Taha,<br>93400 Kuching, Sarawak</p>
				</div>
				<div class="group relative rounded-2xl border border-slate-200 bg-white/70 backdrop-blur p-5 shadow-sm hover:shadow-md transition-shadow">
					<h3 class="font-medium text-slate-800">Branch Office (Labuan)</h3>
					<p class="mt-3 text-xs leading-relaxed text-slate-600">F-5, Paragon Labuan,<br>Jalan Merdeka,<br>87000 FT Labuan</p>
				</div>
			</div>
		</section>
	</div>
</section>


{% endblock %}
