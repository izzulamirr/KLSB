<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>{% block title %}KLSB{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
  <style>
    /* Default header state (top of page) */
    #site-header {
      background-color: white; /* solid white instead of transparent */
    }
    .header-link, .header-brand, .header-cta {
      color: #0f172a; /* slate-900 (black-ish) */
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 {{ page_class|default('') }}">

  <!-- Header -->
  <header id="site-header" class="fixed top-0 inset-x-0 z-50 border-b border-slate-200 bg-white/90 backdrop-blur supports-[backdrop-filter]:bg-white/70">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
      <div class="nav-bar h-full justify-between w-full">
        <!-- Left cluster: Logo -->
        <div class="flex items-center gap-4">
          <a href="/" class="block" aria-label="KLSB Home">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="KLSB logo" class="branding-logo" loading="lazy">
          </a>
        </div>

        <!-- Desktop navigation -->
        <nav class="nav-links" aria-label="Main navigation">
          <a href="/" class="nav-link" data-nav>Home</a>
          <a href="/services" class="nav-link" data-nav>Services</a>
          <a href="{{ url_for('main.profile') }}" class="nav-link" data-nav>Profile</a>
          <a href="{{ url_for('main.projects') }}" class="nav-link" data-nav>Projects</a>
          <a href="/#clients" class="nav-link" data-nav>Clients</a>
          <a href="/#contact" class="nav-link" data-nav>Contact</a>
        </nav>

        <!-- CTA (desktop) -->
        <div class="flex items-center gap-3">
          <a href="/#contact" class="nav-cta" data-cta>
            <span>Get in touch</span>
          </a>
          <button class="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-nav">
            <div class="bars" aria-hidden="true">
              <span></span><span></span><span></span>
            </div>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Mobile panel -->
  <div class="mobile-panel" id="mobile-nav" hidden>
    <div class="mobile-sheet">
      <nav aria-label="Mobile navigation">
        <ul class="mobile-nav-links">
          <li><a href="/services" data-nav>Services</a></li>
          <li><a href="{{ url_for('main.profile') }}" data-nav>Profile</a></li>
            <li><a href="{{ url_for('main.projects') }}" data-nav>Projects</a></li>
          <li><a href="/#clients" data-nav>Clients</a></li>
          <li><a href="/#contact" data-nav>Contact</a></li>
        </ul>
      </nav>
      <div class="mt-4">
        <a href="/#contact" class="nav-cta w-full justify-center" data-cta>Get in touch</a>
      </div>
      <div class="mobile-footer">© KLSB. All rights reserved.</div>
    </div>
  </div>

  <!-- Main content -->
  <main class="pt-16">
    {% block content %}{% endblock %}
  </main>

  <footer class="py-8 text-center text-sm text-slate-500">
    © KLSB. All rights reserved.
  </footer>

  <!-- Header scroll behavior -->
  <script>
    const header = document.getElementById('site-header');

    const onScroll = () => {
      if (window.scrollY > 10) {
        header.classList.add('backdrop-blur','shadow-sm');
      } else {
        header.classList.remove('backdrop-blur','shadow-sm');
      }
    };

    // initial state and listener
    onScroll();
    window.addEventListener('scroll', onScroll, { passive: true });
  </script>
  <script src="{{ url_for('static', filename='js/nav.js') }}" defer></script>
</body>
</html>
